<!DOCTYPE html>
<html lang="zh-Hant">

<head>
	<title></title>
	<link rel="stylesheet" href="styles.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
</head>

<body>
	<div class="grid-container">
		<div class="grid-item"></div>
		<div class="grid-item"><img src="1.jpg" width="200" height="200" style="visibility: hidden;" id="1"></div>
		<div class="grid-item"><img src="2.jpg" width="200" height="200" style="visibility: hidden;" id="2"></div>
		<div class="grid-item"></div>
		<div class="grid-item"><img src="5.jpg" width="200" height="200" style="visibility: hidden;" id="5"></div>
		<div class="grid-item"><img src="6.jpg" width="200" height="200" style="visibility: hidden;" id="6"></div>
		<div class="grid-item"></div>
		<div class="grid-item"></div>
		<div class="grid-item"><img src="3.jpg" width="200" height="200" style="visibility: hidden;" id="3"></div>
		<div class="grid-item"><img src="4.jpg" width="200" height="200" style="visibility: hidden;" id="4"></div>		
		<div class="grid-item"></div>
		<div class="grid-item"><img src="7.jpg" width="200" height="200" style="visibility: hidden;" id="7"></div>
		<div class="grid-item"><img src="8.jpg" width="200" height="200" style="visibility: hidden;" id="8"></div>	
		<div class="grid-item"></div>
	</div>
	<div id="showbar" style="height:90px;padding:15px;"></div>
	<button id="directbutton" onclick="direct()" class="drtbtn"> Draw Battle! </button>
	
	<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
	<script>
		firebase.initializeApp({
		  databaseURL: "https://findme2021-269dc-default-rtdb.firebaseio.com/"
		});
		const database = firebase.database();
	</script>
	<script>
		function getParameterByName(name, url) {
			if (!url) url = window.location.href;
			name = name.replace(/[\[\]]/g, '\\$&');
			var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
				results = regex.exec(url);
			if (!results) return null;
			if (!results[2]) return '';
			return decodeURIComponent(results[2].replace(/\+/g, ' '));
		}
		var name = getParameterByName('name');
		console.log(name);
		var all_done = true;
		database.ref('/').once('value',e=>{
			data = e.val();
			for (var i = 0; i <= 3; i++){
				if (data[name]['p' + (i+1).toString()]['correct'] == 1){
					document.getElementById((i+1).toString()).style.visibility = "visible";
					document.getElementById((i+5).toString()).style.visibility = "visible";
				}
				else{
					all_done = false;
				}
			}
			if (all_done){
				document.getElementById("showbar").innerHTML = "恭喜你解完所有謎題！<br>你可以繼續留在Gather Town，或是來跟我們玩Draw Battle。<br>請記得在8:20回到Google Meet聊天室。";
				document.getElementById("directbutton").classList.remove('drtbtn');
				document.getElementById("directbutton").classList.add('drtbtn2');
			}
		});
		
	</script>
	<script>
		function direct(){
			window.location.href = "https://drawbattle.io/YLSA";
		}
	</script>
</body>

</html>

<!-- end -->